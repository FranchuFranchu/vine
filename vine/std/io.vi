
fn println(io, str) {
  let io = print(io, str);
  let io = print_char(io, '\n');
  io
}

fn print(io, str) {
  let (len, buf) = str;
  let chars = buf(_);
  let char;
  while len {
    len = len - 1;
    (char, chars) = chars;
    io = print_char(io, char);
  }
  io
}

inline_ivy! print_char {
  lam(@io_print_char(a b) lam(a b))
}
